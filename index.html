function connect() {
  const nickname = document.getElementById('nickname').value;
  const tags = document.getElementById('tags').value;
  const protocol = location.protocol === 'https:' ? 'wss://' : 'ws://';
  const wsUrl = protocol + location.host;
  ws = new WebSocket(wsUrl);

  ws.onopen = () => {
    ws.send(JSON.stringify({ type: 'join', nickname, tags }));
    document.getElementById('login').style.display = 'none';
    document.getElementById('main').style.display = 'block';
  };

  ws.onmessage = (event) => {
    // rest unchanged
  };
}
